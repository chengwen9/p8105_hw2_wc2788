p8105\_hw2\_wc2788
================
Wen Cheng
10/4/2021

## Problem 1

import data trash wheel collection, read specify sheet and omit non-data
entries.

``` r
library(readxl)
Trash_Wheel = read_excel("Trash-Wheel-Collection-Totals-7-2020-2.xlsx", #import data
                                    sheet = "Mr. Trash Wheel", #specify the sheet
                                    skip = 1, #skip the first row contain with graph
                                    cell_cols("A:N") #keep the column with data and omit non-data column 
                                )
```

clean up names

``` r
names(Trash_Wheel)
```

    ##  [1] "Dumpster"             "Month"                "Year"                
    ##  [4] "Date"                 "Weight (tons)"        "Volume (cubic yards)"
    ##  [7] "Plastic Bottles"      "Polystyrene"          "Cigarette Butts"     
    ## [10] "Glass Bottles"        "Grocery Bags"         "Chip Bags"           
    ## [13] "Sports Balls"         "Homes Powered*"

``` r
Trash_Wheel = janitor::clean_names(Trash_Wheel) %>%
  drop_na(dumpster) %>% #omit rows that do not include dumpster-specific data
  mutate(sports_balls = as.integer(round(sports_balls,0))) #round sports balls to integer
Trash_Wheel
```

    ## # A tibble: 454 × 14
    ##    dumpster month  year date                weight_tons volume_cubic_yards
    ##    <chr>    <chr> <dbl> <dttm>                    <dbl>              <dbl>
    ##  1 1        May    2014 2014-05-16 00:00:00        4.31                 18
    ##  2 2        May    2014 2014-05-16 00:00:00        2.74                 13
    ##  3 3        May    2014 2014-05-16 00:00:00        3.45                 15
    ##  4 4        May    2014 2014-05-17 00:00:00        3.1                  15
    ##  5 5        May    2014 2014-05-17 00:00:00        4.06                 18
    ##  6 6        May    2014 2014-05-20 00:00:00        2.71                 13
    ##  7 7        May    2014 2014-05-21 00:00:00        1.91                  8
    ##  8 8        May    2014 2014-05-28 00:00:00        3.7                  16
    ##  9 9        June   2014 2014-06-05 00:00:00        2.52                 14
    ## 10 10       June   2014 2014-06-11 00:00:00        3.76                 18
    ## # … with 444 more rows, and 8 more variables: plastic_bottles <dbl>,
    ## #   polystyrene <dbl>, cigarette_butts <dbl>, glass_bottles <dbl>,
    ## #   grocery_bags <dbl>, chip_bags <dbl>, sports_balls <int>,
    ## #   homes_powered <dbl>

Read and clean precipitation data for 2018

``` r
precip_18 = read_excel("Trash-Wheel-Collection-Totals-7-2020-2.xlsx", #import data
                                    sheet = "2018 Precipitation", #specify the sheet
                                    skip = 1 #omit first row that not contain data
                      
                               )
names(precip_18)
```

    ## [1] "Month" "Total"

``` r
precip_18 = janitor::clean_names(precip_18) %>%
  drop_na(month)%>%
  mutate(year = 2018)  #add year variable
precip_18
```

    ## # A tibble: 12 × 3
    ##    month total  year
    ##    <dbl> <dbl> <dbl>
    ##  1     1  0.94  2018
    ##  2     2  4.8   2018
    ##  3     3  2.69  2018
    ##  4     4  4.69  2018
    ##  5     5  9.27  2018
    ##  6     6  4.77  2018
    ##  7     7 10.2   2018
    ##  8     8  6.45  2018
    ##  9     9 10.5   2018
    ## 10    10  2.12  2018
    ## 11    11  7.82  2018
    ## 12    12  6.11  2018

Read and clean precipitation data for 2019

``` r
precip_19 = read_excel("Trash-Wheel-Collection-Totals-7-2020-2.xlsx", #import data
                                    sheet = "2019 Precipitation", #specify the sheet
                                    skip = 1 #omit first row that not contain data
                               )
names(precip_19)
```

    ## [1] "Month" "Total"

``` r
precip_19 = janitor::clean_names(precip_19) %>%
  drop_na(month)%>%
  mutate(year = 2019) #add  year variable
precip_19
```

    ## # A tibble: 12 × 3
    ##    month total  year
    ##    <dbl> <dbl> <dbl>
    ##  1     1  3.1   2019
    ##  2     2  3.64  2019
    ##  3     3  4.47  2019
    ##  4     4  1.46  2019
    ##  5     5  3.58  2019
    ##  6     6  0.42  2019
    ##  7     7  3.85  2019
    ##  8     8  2.39  2019
    ##  9     9  0.16  2019
    ## 10    10  5.45  2019
    ## 11    11  1.86  2019
    ## 12    12  3.57  2019

combine precipitation datasets of 2018 and 2019, and convert month to a
character variable

``` r
combine_1819 = bind_rows(precip_18, precip_19) %>% #combine 2018 and 2019 dataset
mutate(month = month.name[month]) #convert month to character variable
combine_1819
```

    ## # A tibble: 24 × 3
    ##    month     total  year
    ##    <chr>     <dbl> <dbl>
    ##  1 January    0.94  2018
    ##  2 February   4.8   2018
    ##  3 March      2.69  2018
    ##  4 April      4.69  2018
    ##  5 May        9.27  2018
    ##  6 June       4.77  2018
    ##  7 July      10.2   2018
    ##  8 August     6.45  2018
    ##  9 September 10.5   2018
    ## 10 October    2.12  2018
    ## # … with 14 more rows

There are 454 observation and 14 variables in Mr. Trash Wheel. Key
variables are dumpster, month, year, data and different kind of trash
and their weight and volume.

The total precipitation of 2018 is 70.33. The median number of sports
balls in a dumpster in 2019 is 9.

## Problem 2

read and clean the data in pols-month.csv.

``` r
library(readr)
pols_month <- read_csv("fivethirtyeight_datasets/pols-month.csv") %>%
  janitor::clean_names() %>%
  separate(mon,c("year","month","day"),remove=TRUE,convert = TRUE) %>% #break up the variable mon into integer variables year, month, and day
  mutate(month = month.name[as.integer(month)]) %>% #replace month number with month name
  mutate(president = prez_gop + prez_dem) %>% #create a president variable taking values gop and dem
  select(-prez_dem, -prez_gop, -day) #remove prez_dem and prez_gop, and the day variable.
```

    ## Rows: 822 Columns: 9

    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon

    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
view(pols_month)
```

read and clean the data in snp.csv.

``` r
snp <-  read_csv("fivethirtyeight_datasets/snp.csv") %>%
  janitor::clean_names() %>%
  separate(date,c("month","day","year"),remove=TRUE,convert = TRUE) %>% #break up the variable date into integer variables year, month, and day
  select(year, month, close) %>% #year and month are the leading columns
  mutate(month = month.name[as.integer(month)])%>% #replace month number with month name
  mutate(year = ifelse(year > 20, 1900+year, 2000+year)) # change year from 2 digit to 4 digit 
```

    ## Rows: 787 Columns: 2

    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close

    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
snp
```

    ## # A tibble: 787 × 3
    ##     year month    close
    ##    <dbl> <chr>    <dbl>
    ##  1  2015 July     2080.
    ##  2  2015 June     2063.
    ##  3  2015 May      2107.
    ##  4  2015 April    2086.
    ##  5  2015 March    2068.
    ##  6  2015 February 2104.
    ##  7  2015 January  1995.
    ##  8  2014 December 2059.
    ##  9  2014 November 2068.
    ## 10  2014 October  2018.
    ## # … with 777 more rows

tidy the unemployment data

``` r
unemployment <- read_csv("fivethirtyeight_datasets/unemployment.csv")
```

    ## Rows: 68 Columns: 13

    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec

    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
#unemployment <- read_csv("fivethirtyeight_datasets/unemployment.csv") %>%
  #janitor::clean_names() %>%
  ##rename_at(vars(tolower(month.abb)),~month.name)%>%
  #colnames(jan:dec) = c(Januray:December) #match the previous month
  #pivot_longer(Januray:December,
    #names_to = "month") %>% #switching from “wide” to “long” format
  #mutate(year= as.character(year))

    #select(year,month,value) #year and month are the leading columns
#unemployment
unemployment
```

    ## # A tibble: 68 × 13
    ##     Year   Jan   Feb   Mar   Apr   May   Jun   Jul   Aug   Sep   Oct   Nov   Dec
    ##    <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl>
    ##  1  1948   3.4   3.8   4     3.9   3.5   3.6   3.6   3.9   3.8   3.7   3.8   4  
    ##  2  1949   4.3   4.7   5     5.3   6.1   6.2   6.7   6.8   6.6   7.9   6.4   6.6
    ##  3  1950   6.5   6.4   6.3   5.8   5.5   5.4   5     4.5   4.4   4.2   4.2   4.3
    ##  4  1951   3.7   3.4   3.4   3.1   3     3.2   3.1   3.1   3.3   3.5   3.5   3.1
    ##  5  1952   3.2   3.1   2.9   2.9   3     3     3.2   3.4   3.1   3     2.8   2.7
    ##  6  1953   2.9   2.6   2.6   2.7   2.5   2.5   2.6   2.7   2.9   3.1   3.5   4.5
    ##  7  1954   4.9   5.2   5.7   5.9   5.9   5.6   5.8   6     6.1   5.7   5.3   5  
    ##  8  1955   4.9   4.7   4.6   4.7   4.3   4.2   4     4.2   4.1   4.3   4.2   4.2
    ##  9  1956   4     3.9   4.2   4     4.3   4.3   4.4   4.1   3.9   3.9   4.3   4.2
    ## 10  1957   4.2   3.9   3.7   3.9   4.1   4.3   4.2   4.1   4.4   4.5   5.1   5.2
    ## # … with 58 more rows

Join the datasets by merging snp into pols, and merging unemployment

``` r
#join_data = left_join(pols_month,snp)%>% 
  #left_join(unemployment)
#join_data
```

join\_data join these three datasets, and it have all variables above.

## Problem 3

Load and tidy the data

``` r
Popular_Baby_Names <- read_csv("Popular_Baby_Names.csv") %>%
  janitor::clean_names() %>% 
  mutate(ethnicity = recode(ethnicity, 
                            "ASIAN AND PACI" = "ASIAN AND PACIFIC ISLANDER",
                            "BLACK NON HISP" = "BLACK NON HISPANIC",
                            "WHITE NON HISP" = "WHITE NON HISPANIC")) %>%
  mutate(gender = str_to_lower(gender),
         ethnicity = str_to_sentence(ethnicity),
         childs_first_name = str_to_sentence(childs_first_name)) 
```

    ## Rows: 19418 Columns: 6

    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (3): Gender, Ethnicity, Child's First Name
    ## dbl (3): Year of Birth, Count, Rank

    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
Popular_Baby_Names
```

    ## # A tibble: 19,418 × 6
    ##    year_of_birth gender ethnicity                  childs_first_name count  rank
    ##            <dbl> <chr>  <chr>                      <chr>             <dbl> <dbl>
    ##  1          2016 female Asian and pacific islander Olivia              172     1
    ##  2          2016 female Asian and pacific islander Chloe               112     2
    ##  3          2016 female Asian and pacific islander Sophia              104     3
    ##  4          2016 female Asian and pacific islander Emily                99     4
    ##  5          2016 female Asian and pacific islander Emma                 99     4
    ##  6          2016 female Asian and pacific islander Mia                  79     5
    ##  7          2016 female Asian and pacific islander Charlotte            59     6
    ##  8          2016 female Asian and pacific islander Sarah                57     7
    ##  9          2016 female Asian and pacific islander Isabella             56     8
    ## 10          2016 female Asian and pacific islander Hannah               56     8
    ## # … with 19,408 more rows

dplyr remove duplicate rows

``` r
Popular_Baby_Names %>% 
  dplyr::distinct()
```

    ## # A tibble: 12,181 × 6
    ##    year_of_birth gender ethnicity                  childs_first_name count  rank
    ##            <dbl> <chr>  <chr>                      <chr>             <dbl> <dbl>
    ##  1          2016 female Asian and pacific islander Olivia              172     1
    ##  2          2016 female Asian and pacific islander Chloe               112     2
    ##  3          2016 female Asian and pacific islander Sophia              104     3
    ##  4          2016 female Asian and pacific islander Emily                99     4
    ##  5          2016 female Asian and pacific islander Emma                 99     4
    ##  6          2016 female Asian and pacific islander Mia                  79     5
    ##  7          2016 female Asian and pacific islander Charlotte            59     6
    ##  8          2016 female Asian and pacific islander Sarah                57     7
    ##  9          2016 female Asian and pacific islander Isabella             56     8
    ## 10          2016 female Asian and pacific islander Hannah               56     8
    ## # … with 12,171 more rows

“Olivia” as a female baby name over time

``` r
Olivia = filter(Popular_Baby_Names, gender == "female" & childs_first_name == "Olivia") %>% 
  select(-gender, -childs_first_name, -count) %>% 
  pivot_wider(
     names_from = year_of_birth,
     values_from = rank
  )
```

    ## Warning: Values are not uniquely identified; output will contain list-cols.
    ## * Use `values_fn = list` to suppress this warning.
    ## * Use `values_fn = length` to identify where the duplicates arise
    ## * Use `values_fn = {summary_fun}` to summarise duplicates

``` r
view(Olivia)
```

most popular name among male children over time.

``` r
male = filter(Popular_Baby_Names, gender == "male" & rank == 1) %>% 
  select(-gender, -rank, -count) %>% 
  pivot_wider(
     names_from = year_of_birth,
     values_from = childs_first_name
  )
```

    ## Warning: Values are not uniquely identified; output will contain list-cols.
    ## * Use `values_fn = list` to suppress this warning.
    ## * Use `values_fn = length` to identify where the duplicates arise
    ## * Use `values_fn = {summary_fun}` to summarise duplicates

``` r
view(male)
```

scatter plot for male, white non-hispanic children born in 2016

``` r
male_2016 = filter(Popular_Baby_Names, gender == "male", 
                           ethnicity == "White non hispanic", 
                           year_of_birth == 2016)
ggplot(male_2016, aes(x = rank, y = count)) + 
  labs(
    title = "white non-hispanic male children born in 2016 name rank", 
    x = "rank",#rank in popularity of that name
    y = "number of children",#the number of children with a name 
  ) + geom_point() 
```

![](p8105_hw2_wc2788_files/figure-gfm/unnamed-chunk-14-1.png)<!-- -->
